{"version":3,"sources":["../src/util.js","../src/index.js"],"names":["Util","$","TRANSITION_END","triggerTransitionEnd","element","trigger","supportsTransitionEnd","Boolean","transitionEndEmulator","duration","_this","this","called","one","setTimeout","fn","mmEmulateTransitionEnd","event","special","bindType","delegateType","handle","target","is","handleObj","handler","apply","arguments","NAME","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","Default","toggle","preventDefault","triggerElement","parentTrigger","subMenu","Event","SHOW","SHOWN","HIDE","HIDDEN","CLICK_DATA_API","ClassName","MetisMenu","config","_objectSpread","transitioning","init","self","conf","addClass","find","children","attr","parents","on","eTar","parentTar","last","parent","hasClass","not","removeClass","has","e","paRent","sibLings","siblings","List","hide","show","onTransitionStart","elem","startEvent","isDefaultPrevented","toggleElem","ACTIVE","height","setTransitioning","scrollHeight","_this2","offsetHeight","complete","onTransitionEnd","css","isTransitioning","dispose","removeData","off","jQueryInterface","each","$this","data","undefined","Error","Constructor","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery';\n\nconst Util = (($) => { // eslint-disable-line no-shadow\n  const TRANSITION_END = 'transitionend';\n\n  const Util = { // eslint-disable-line no-shadow\n    TRANSITION_END: 'mmTransitionEnd',\n\n    triggerTransitionEnd(element) {\n      $(element).trigger(TRANSITION_END);\n    },\n\n    supportsTransitionEnd() {\n      return Boolean(TRANSITION_END);\n    },\n  };\n\n  function getSpecialTransitionEndEvent() {\n    return {\n      bindType: TRANSITION_END,\n      delegateType: TRANSITION_END,\n      handle(event) {\n        if ($(event.target).is(this)) {\n          return event\n            .handleObj\n            .handler\n            .apply(this, arguments); // eslint-disable-line prefer-rest-params\n        }\n        return undefined;\n      },\n    };\n  }\n\n  function transitionEndEmulator(duration) {\n    let called = false;\n\n    $(this).one(Util.TRANSITION_END, () => {\n      called = true;\n    });\n\n    setTimeout(() => {\n      if (!called) {\n        Util.triggerTransitionEnd(this);\n      }\n    }, duration);\n\n    return this;\n  }\n\n  function setTransitionEndSupport() {\n    $.fn.mmEmulateTransitionEnd = transitionEndEmulator; // eslint-disable-line no-param-reassign\n    // eslint-disable-next-line no-param-reassign\n    $.event.special[Util.TRANSITION_END] = getSpecialTransitionEndEvent();\n  }\n\n  setTransitionEndSupport();\n\n  return Util;\n})($);\n\nexport default Util;\n","import $ from 'jquery';\nimport Util from './util';\n\nconst NAME = 'metisMenu';\nconst DATA_KEY = 'metisMenu';\nconst EVENT_KEY = `.${DATA_KEY}`;\nconst DATA_API_KEY = '.data-api';\nconst JQUERY_NO_CONFLICT = $.fn[NAME];\nconst TRANSITION_DURATION = 350;\n\nconst Default = {\n  toggle: true,\n  preventDefault: true,\n  triggerElement: 'a',\n  parentTrigger: 'li',\n  subMenu: 'ul',\n};\n\nconst Event = {\n  SHOW: `show${EVENT_KEY}`,\n  SHOWN: `shown${EVENT_KEY}`,\n  HIDE: `hide${EVENT_KEY}`,\n  HIDDEN: `hidden${EVENT_KEY}`,\n  CLICK_DATA_API: `click${EVENT_KEY}${DATA_API_KEY}`,\n};\n\nconst ClassName = {\n  METIS: 'metismenu',\n  ACTIVE: 'mm-active',\n  SHOW: 'mm-show',\n  COLLAPSE: 'mm-collapse',\n  COLLAPSING: 'mm-collapsing',\n  COLLAPSED: 'mm-collapsed',\n};\n\nclass MetisMenu {\n  // eslint-disable-line no-shadow\n  constructor(element, config) {\n    this.element = element;\n    this.config = { ...Default, ...config };\n    this.transitioning = null;\n\n    this.init();\n  }\n\n  init() {\n    const self = this;\n    const conf = this.config;\n\n    $(this.element).addClass(ClassName.METIS); // add metismenu class to element\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .children(conf.triggerElement)\n      .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the trigger element\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .parents(conf.parentTrigger)\n      .addClass(ClassName.ACTIVE);\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .parents(conf.parentTrigger)\n      .children(conf.triggerElement)\n      .attr('aria-expanded', 'true'); // add attribute aria-expanded=true the triggers of all parents\n\n    $(this.element)\n      .find(`${conf.parentTrigger}:not(:has(${conf.subMenu}))`)\n      .children(conf.triggerElement)\n      .on(Event.CLICK_DATA_API, function () { // eslint-disable-line func-names\n        const eTar = $(this);\n        const parentTar = eTar.parents(conf.parentTrigger).last()[0];\n        if (eTar.parent(conf.parentTrigger).hasClass(ClassName.ACTIVE)) {\n          return;\n        }\n        eTar.parent(conf.parentTrigger).addClass(ClassName.ACTIVE);\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).children(conf.triggerElement)\n          .attr('aria-expanded', 'false');\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).children(conf.subMenu)\n          .removeClass(ClassName.SHOW);\n        eTar.parents(`${conf.subMenu}.${ClassName.METIS}`).children(`${conf.parentTrigger}.${ClassName.ACTIVE}:not(:has(${conf.subMenu}.${ClassName.SHOW}.${ClassName.COLLAPSED}:has(${conf.parentTrigger}.${ClassName.ACTIVE})))`).not(parentTar).removeClass(ClassName.ACTIVE);\n      });\n\n    $(this.element)\n      .find(`${conf.parentTrigger}.${ClassName.ACTIVE}`)\n      .has(conf.subMenu)\n      .children(conf.subMenu)\n      .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`);\n\n    $(this.element)\n      .find(conf.parentTrigger)\n      .not(`.${ClassName.ACTIVE}`)\n      .has(conf.subMenu)\n      .children(conf.subMenu)\n      .addClass(ClassName.COLLAPSE);\n\n    $(this.element)\n      .find(conf.parentTrigger)\n      .has(conf.subMenu)\n      .children(conf.triggerElement)\n      .on(Event.CLICK_DATA_API, function (e) { // eslint-disable-line func-names\n        const eTar = $(this);\n        const paRent = eTar.parent(conf.parentTrigger);\n        const sibLings = paRent\n          .siblings(conf.parentTrigger)\n          .children(conf.triggerElement);\n        const List = paRent.children(conf.subMenu);\n        if (conf.preventDefault) {\n          e.preventDefault();\n        }\n        if (eTar.attr('aria-disabled') === 'true') {\n          return;\n        }\n        if (paRent.hasClass(ClassName.ACTIVE)) {\n          eTar.attr('aria-expanded', 'false');\n          self.hide(List);\n        } else {\n          self.show(List);\n          eTar.attr('aria-expanded', 'true');\n          if (conf.toggle) {\n            sibLings.attr('aria-expanded', 'false');\n          }\n        }\n\n        if (conf.onTransitionStart) {\n          conf.onTransitionStart(e);\n        }\n      });\n  }\n\n  show(element) {\n    if (this.transitioning || $(element).hasClass(ClassName.COLLAPSING)) {\n      return;\n    }\n    const elem = $(element);\n\n    const startEvent = $.Event(Event.SHOW);\n    elem.trigger(startEvent);\n\n    if (startEvent.isDefaultPrevented()) {\n      return;\n    }\n\n    elem.parent(this.config.parentTrigger).addClass(ClassName.ACTIVE);\n\n    if (this.config.toggle) {\n      const toggleElem = elem.parent(this.config.parentTrigger).siblings().children(`${this.config.subMenu}.${ClassName.SHOW}:has(${this.config.parentTrigger}.${this.config.ACTIVE})`);\n      this.hide(toggleElem);\n    }\n\n    elem\n      .removeClass(ClassName.COLLAPSE)\n      .addClass(ClassName.COLLAPSING)\n      .height(0);\n\n    this.setTransitioning(true);\n\n    const complete = () => {\n      // check if disposed\n      if (!this.config || !this.element) {\n        return;\n      }\n      elem\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(`${ClassName.COLLAPSE} ${ClassName.SHOW}`)\n        .height('');\n\n      this.setTransitioning(false);\n\n      elem.trigger(Event.SHOWN);\n    };\n\n    elem\n      .height(element[0].scrollHeight)\n      .one(Util.TRANSITION_END, complete)\n      .mmEmulateTransitionEnd(TRANSITION_DURATION);\n  }\n\n  hide(element) {\n    if (\n      this.transitioning || !$(element).hasClass(ClassName.SHOW)\n    ) {\n      return;\n    }\n\n    const elem = $(element);\n\n    const startEvent = $.Event(Event.HIDE);\n    elem.trigger(startEvent);\n\n    if (startEvent.isDefaultPrevented()) {\n      return;\n    }\n\n    elem.parent(this.config.parentTrigger).removeClass(ClassName.ACTIVE);\n    // eslint-disable-next-line no-unused-expressions\n    elem.height(elem.height())[0].offsetHeight;\n\n    elem\n      .addClass(ClassName.COLLAPSING)\n      .removeClass(ClassName.COLLAPSE)\n      .removeClass(ClassName.SHOW);\n\n    this.setTransitioning(true);\n\n    const complete = () => {\n      // check if disposed\n      if (!this.config || !this.element) {\n        return;\n      }\n      if (this.transitioning && this.config.onTransitionEnd) {\n        this.config.onTransitionEnd();\n      }\n\n      this.setTransitioning(false);\n      elem.trigger(Event.HIDDEN);\n\n      elem\n        .removeClass(ClassName.COLLAPSING)\n        .addClass(ClassName.COLLAPSE);\n    };\n\n    if (elem.height() === 0 || elem.css('display') === 'none') {\n      complete();\n    } else {\n      elem\n        .height(0)\n        .one(Util.TRANSITION_END, complete)\n        .mmEmulateTransitionEnd(TRANSITION_DURATION);\n    }\n  }\n\n  setTransitioning(isTransitioning) {\n    this.transitioning = isTransitioning;\n  }\n\n  dispose() {\n    $.removeData(this.element, DATA_KEY);\n\n    $(this.element)\n      .find(this.config.parentTrigger)\n      .has(this.config.subMenu)\n      .children(this.config.triggerElement)\n      .off('click');\n\n    this.transitioning = null;\n    this.config = null;\n    this.element = null;\n  }\n\n  static jQueryInterface(config) {\n    // eslint-disable-next-line func-names\n    return this.each(function () {\n      const $this = $(this);\n      let data = $this.data(DATA_KEY);\n      const conf = {\n        ...Default,\n        ...$this.data(),\n        ...(typeof config === 'object' && config ? config : {}),\n      };\n\n      if (!data) {\n        data = new MetisMenu(this, conf);\n        $this.data(DATA_KEY, data);\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined) {\n          throw new Error(`No method named \"${config}\"`);\n        }\n        data[config]();\n      }\n    });\n  }\n}\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME] = MetisMenu.jQueryInterface; // eslint-disable-line no-param-reassign\n$.fn[NAME].Constructor = MetisMenu; // eslint-disable-line no-param-reassign\n$.fn[NAME].noConflict = () => {\n  // eslint-disable-line no-param-reassign\n  $.fn[NAME] = JQUERY_NO_CONFLICT; // eslint-disable-line no-param-reassign\n  return MetisMenu.jQueryInterface;\n};\n\nexport default MetisMenu;\n"]}